!function($app){var patternFormat=function(e){return e?$(e).attr("format")||"DD/MM/YYYY":"DD/MM/YYYY"},parsePermission=function(e){var t={get:{public:!0},post:{public:!0},put:{public:!0},delete:{public:!0},filter:{public:!0}};if(e)for(var r=e.toLowerCase().trim().split(","),i=0;i<r.length;i++){var a=r[i].trim();if(a){var n=a.split(":");if(2==n.length){var o=n[0].trim(),s=n[1].trim();if(s){for(var l=s.split(";"),c={},p=0;p<l.length;p++){var u=l[p].trim();u&&(c[u]=!0)}t[o]=c}}}}return t};app.directive("asDate",function(){return{require:"^ngModel",restrict:"A",link:function(e,t,r,i){function a(){var e=t.val(),r=moment(e,patternFormat(t));r.isValid()&&i.$setViewValue(r.toDate())}if(i){var n=patternFormat(t),o={format:n,locale:"pt-BR",showTodayButton:!0,useStrict:!0,tooltips:{today:"Hoje",clear:"Limpar seleção",close:"Fechar",selectMonth:"Selecionar mês",prevMonth:"Mês anterior",nextMonth:"Próximo mês",selectYear:"Selecionar ano",prevYear:"Ano anterior",nextYear:"Próximo ano",selectDecade:"Selecionar década",prevDecade:"Década anterior",nextDecade:"Próxima década",prevCentury:"Século anterior",nextCentury:"Próximo século"}};"DD/MM/YYYY"!=n&&(o.sideBySide=!0),t.datetimepicker(o),t.on("dp.change",function(){$(this).is(":visible")&&e.$apply(a)}),i.$render=function(){if(i.$viewValue){var e=moment(i.$viewValue);if(e.isValid())t.val(e.format(patternFormat(t)));else{var r=parseInt(i.$viewValue,10);e=moment(r),e.isValid()?t.val(e.format(patternFormat(t))):t.val("")}}else t.data("DateTimePicker").clear(),t.val("")},a()}}}}).directive("ngDestroy",function(){return{restrict:"A",link:function(scope,element,attrs,ctrl){element.on("$destroy",function(){attrs.ngDestroy&&attrs.ngDestroy.length>0&&(attrs.ngDestroy.indexOf("app.")>-1||attrs.ngDestroy.indexOf("blockly.")>-1?scope.$eval(attrs.ngDestroy):eval(attrs.ngDestroy))})}}}).directive("pwCheck",[function(){"use strict";return{require:"ngModel",link:function(e,t,r,i){var a="#"+r.pwCheck;t.add(a).on("keyup",function(){e.$apply(function(){var e=t.val()===$(a).val();i.$setValidity("pwmatch",e)})})}}}]).directive("valid",function(){return{require:"^ngModel",restrict:"A",link:function(e,t,r,i){var a={cpf:CPF,cnpj:CNPJ};i.$validators[r.valid]=function(e,i){var n=e||i,o=a[r.valid].isValid(n);return o?t[0].setCustomValidity(""):t[0].setCustomValidity(t[0].dataset.errorMessage),o||!n}}}}).directive("cronappSecurity",function(){return{restrict:"A",link:function(e,t,r){var i=[];e.session&&e.session.roles&&(i=e.session.roles.toLowerCase().split(","));for(var a=parsePermission(r.cronappSecurity),n=!1,o=0;o<i.length;o++){var s=i[o].trim();if(s&&a.get[s]){n=!0;break}}n||t.hide(),console.log(i),console.log(parsePermission(r.cronappSecurity)),console.log(n)}}})}(app);